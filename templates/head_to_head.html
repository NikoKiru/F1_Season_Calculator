{% extends "base.html" %}

{% block title %}Head-to-Head{% endblock %}

{% block breadcrumbs %}
<nav class="breadcrumbs" aria-label="Breadcrumb">
    <div class="breadcrumbs-container">
        <ol class="breadcrumb-list">
            <li class="breadcrumb-item"><a href="{{ url_for('views.index') }}" class="breadcrumb-link">Home</a></li>
            <li class="breadcrumb-item"><span class="breadcrumb-current">Head-to-Head</span></li>
        </ol>
    </div>
</nav>
{% endblock %}

{% block content %}
<h2>Head-to-Head Comparison</h2>

<!-- Selection Slots -->
<div class="h2h-selection-area">
    <div class="h2h-slot" id="h2h-slot-1" data-slot="1">
        <div class="h2h-slot-empty">
            <span class="h2h-slot-label">Driver 1</span>
            <span class="h2h-slot-hint">Select below</span>
        </div>
    </div>

    <button class="h2h-swap-btn" id="h2h-swap-btn" title="Swap drivers" disabled>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M7 16l-4-4 4-4"/>
            <path d="M17 8l4 4-4 4"/>
            <line x1="3" y1="12" x2="21" y2="12"/>
        </svg>
    </button>

    <div class="h2h-slot" id="h2h-slot-2" data-slot="2">
        <div class="h2h-slot-empty">
            <span class="h2h-slot-label">Driver 2</span>
            <span class="h2h-slot-hint">Select below</span>
        </div>
    </div>
</div>

<p class="h2h-prompt" id="h2h-prompt">Click two drivers below to compare</p>

<!-- Driver Picker Grid -->
<div class="h2h-driver-grid" id="h2h-driver-grid">
    {% for code, driver in drivers.items() %}
    <button class="h2h-driver-card" data-code="{{ code }}" style="--team-color: {{ driver.color }};">
        <span class="h2h-card-number">{{ driver.number }}</span>
        <div class="h2h-card-info">
            <span class="h2h-card-name">{{ driver.flag }} {{ driver.name }}</span>
            <span class="h2h-card-team">{{ driver.team }}</span>
        </div>
    </button>
    {% endfor %}
</div>

<!-- Loading & Results -->
<div id="loading-indicator" style="display: none; text-align: center; margin-top: 20px;">
    <div class="spinner"></div>
    <p>Loading comparison...</p>
</div>
<div id="head-to-head-result" style="margin-top: 20px; display: flex; flex-direction: column; align-items: center;">
    <!-- Results will be displayed here -->
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script>
    const DRIVERS = {{ drivers | tojson | safe }};
</script>
<script src="{{ url_for('static', filename='js/head_to_head.js') }}"></script>
{% endblock %}
