{% extends "base.html" %}

{% block title %}Head-to-Head{% endblock %}

{% block page_title %}Head-to-Head Comparison{% endblock %}

{% block content %}
<form id="h2h-form">
    <input type="text" id="driver1" placeholder="Driver 1 (e.g., VER)">
    <input type="text" id="driver2" placeholder="Driver 2 (e.g., NOR)">
    <button type="submit">Compare</button>
</form>
<div id="h2h-result" class="data-container" style="margin-top: 20px;">
    <!-- Results will be displayed here -->
</div>
<a href="{{ url_for('views.index') }}" class="back-link">Back to Home</a>
{% endblock %}

{% block scripts %}
<script>
    document.getElementById('h2h-form').addEventListener('submit', function(event) {
        event.preventDefault();
        const driver1 = document.getElementById('driver1').value.trim();
        const driver2 = document.getElementById('driver2').value.trim();
        if (driver1 && driver2) {
            fetch(`/api/head_to_head/${driver1}/${driver2}`)
                .then(response => response.json())
                .then(data => {
                    const resultDiv = document.getElementById('h2h-result');
                    resultDiv.innerHTML = `
                        <p class="driver-result">${Object.keys(data)[0]}: ${Object.values(data)[0]} wins</p>
                        <p class="driver-result">${Object.keys(data)[1]}: ${Object.values(data)[1]} wins</p>
                    `;
                })
                .catch(error => {
                    console.error('Error fetching H2H data:', error);
                    document.getElementById('h2h-result').innerHTML = `<p class="driver-result">An error occurred.</p>`;
                });
        }
    });
</script>
{% endblock %}