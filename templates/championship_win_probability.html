{% extends "base.html" %}

{% block title %}Championship Win Probability{% endblock %}

{% block main_class %}full-width{% endblock %}

{% block breadcrumbs %}
<nav class="breadcrumbs" aria-label="Breadcrumb">
    <div class="breadcrumbs-container">
        <ol class="breadcrumb-list">
            <li class="breadcrumb-item"><a href="{{ url_for('views.index') }}" class="breadcrumb-link">Home</a></li>
            <li class="breadcrumb-item"><span class="breadcrumb-current">Win Probability</span></li>
        </ol>
    </div>
</nav>
{% endblock %}

{% block content %}
<h2>Championship Win Probability by Season Length</h2>
<div class="table-wrapper">
    <table class="standings-table compact-table">
        <thead>
            <tr>
                <th></th>
                {% for length in data.season_lengths %}
                    <th>{{ length }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>Possible Seasons</th>
                {% for length in data.season_lengths %}
                    <td data-label="{{ length }}">{{ data.possible_seasons[loop.index0] }}</td>
                {% endfor %}
            </tr>
            <tr>
                <th>Total Titles</th>
                {% for length in data.season_lengths %}
                    {% if length == 1 %}
                        <td data-label="{{ length }}">No.</td>
                    {% else %}
                        <td data-label="{{ length }}">%</td>
                    {% endif %}
                {% endfor %}
            </tr>
            {% for driver in data.drivers_data %}
            <tr>
                <th class="driver-cell" data-label="Driver">
                    <span class="color-bar" style="background-color: {{ drivers[driver.driver].color if driver.driver in drivers else '#666' }};"></span>
                    {{ data.driver_names[driver.driver] }}
                </th>
                {% for i in range(data.season_lengths|length) %}
                    {% if data.season_lengths[i] == 1 %}
                        <td data-label="{{ data.season_lengths[i] }}">{{ driver.wins_per_length[i] }}</td>
                    {% else %}
                        <td data-label="{{ data.season_lengths[i] }}">{{ "%.2f"|format(driver.percentages[i]) }}</td>
                    {% endif %}
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
