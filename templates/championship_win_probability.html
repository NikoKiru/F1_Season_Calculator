{% extends "base.html" %}

{% block title %}Championship Win Probability{% endblock %}

{% block page_title %}Championship Win Probability by Season Length{% endblock %}

{% block content %}
<div class="table-wrapper">
    <table class="standings-table">
        <thead>
            <tr>
                <th></th>
                {% for length in data.season_lengths %}
                    <th>{{ length }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>Possible Seasons</th>
                {% for length in data.season_lengths %}
                    <td data-label="{{ length }}">{{ data.possible_seasons[loop.index0] }}</td>
                {% endfor %}
            </tr>
            <tr>
                <th>Total Titles</th>
                {% for length in data.season_lengths %}
                    {% if length == 1 %}
                        <td data-label="{{ length }}">No.</td>
                    {% else %}
                        <td data-label="{{ length }}">%</td>
                    {% endif %}
                {% endfor %}
            </tr>
            {% for driver in data.drivers_data %}
            <tr>
                <th data-label="Driver">{{ data.driver_names[driver.driver] }}</th>
                {% for i in range(data.season_lengths|length) %}
                    {% if data.season_lengths[i] == 1 %}
                        <td data-label="{{ data.season_lengths[i] }}">{{ driver.wins_per_length[i] }}</td>
                    {% else %}
                        <td data-label="{{ data.season_lengths[i] }}">{{ "%.2f"|format(driver.percentages[i]) }}</td>
                    {% endif %}
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<a href="{{ url_for('views.index') }}" class="back-link">Back to Home</a>
{% endblock %}
