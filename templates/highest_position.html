{% extends "base.html" %}

{% block title %}Highest Position{% endblock %}

{% block breadcrumbs %}
<nav class="breadcrumbs" aria-label="Breadcrumb">
    <div class="breadcrumbs-container">
        <ol class="breadcrumb-list">
            <li class="breadcrumb-item"><a href="{{ url_for('views.index') }}" class="breadcrumb-link">Home</a></li>
            <li class="breadcrumb-item"><span class="breadcrumb-current">Highest Position</span></li>
        </ol>
    </div>
</nav>
{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Highest Championship Position</h2>
    <p class="page-subtitle">Best championship finish for each driver. Click any element to explore details.</p>
</div>

<div class="data-container">
    {% if data %}
        <div class="highest-position-grid">
            {% for item in data %}
                <div class="position-card" style="--team-color: {{ drivers[item.driver].color if item.driver in drivers else '#666' }};">
                    <div class="position-card-header">
                        <a href="{{ url_for('views.driver_page', driver_code=item.driver) }}" class="driver-info">
                            <span class="driver-flag">{{ drivers[item.driver].flag if item.driver in drivers else '' }}</span>
                            <span class="driver-name">{{ drivers[item.driver].name if item.driver in drivers else item.driver }}</span>
                        </a>
                        <span class="driver-team">{{ drivers[item.driver].team if item.driver in drivers else '' }}</span>
                    </div>
                    <div class="position-card-body">
                        <a href="{{ url_for('views.driver_position_detail', driver_code=item.driver, position=item.position) }}" class="position-badge">
                            <span class="position-rank">P{{ item.position }}</span>
                            <span class="position-detail">{{ item.max_races }} races</span>
                        </a>
                        <div class="position-stats">
                            <span class="stat-item">
                                <span class="stat-value">{{ item.count }}</span>
                                <span class="stat-label">times</span>
                            </span>
                            {% if item.best_margin is not none %}
                                <a href="{{ url_for('views.championship_page', id=item.best_margin_championship_id) }}" class="stat-item margin-stat">
                                    <span class="stat-value">+{{ item.best_margin }}</span>
                                    <span class="stat-label">best margin</span>
                                </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="no-data">No data available.</p>
    {% endif %}
</div>
{% endblock %}
